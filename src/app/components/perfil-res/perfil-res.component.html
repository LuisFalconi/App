<ion-header>
  <ion-toolbar >
    <ion-button slot="start" fill="none" (click)="goRegreso()">
      <ion-icon name="arrow-back"></ion-icon>
    </ion-button>
    <ion-button slot="end" fill="none" (click)="getMenu()">
      <ion-icon name="menu"></ion-icon>
    </ion-button>
    <ion-title style="text-align: center;">{{res.nombreRestaurante}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-card>
  <ion-header>
    <img *ngIf="res.imagenRes ; else foto" src="{{res.imagenRes}}" width="100%" height="17%" margin-top="5px">
  </ion-header>
</ion-card>

<ion-content class="ion-padding">

  <button class="accordion">Informacion</button>
  <div class="panel">
    <ion-list>
      <ion-item>
        <h6><b>Tipo Restaurante: </b>{{res.tipoRestaurante}}</h6>
      </ion-item>
      <ion-item>
        <h6><b>Capacidad: </b>{{res.capacidadRestaurante}}</h6>
      </ion-item>
      <ion-item>
        <h6><b>Dirección: </b>{{res.direccionRestaurante}}</h6>
      </ion-item>
      <ion-item>
        <h6><b>Hora de apertura: </b>{{res.horaApertura}}</h6>
      </ion-item>
      <ion-item>
        <h6><b>Hora de cierre: </b>{{res.horaCierre}}</h6>
      </ion-item>
    </ion-list>
  </div>
  
  <button class="accordion">Desayunos</button>
  <div class="panel">
    <div *ngFor="let desa of desayunos">
      <div *ngIf="res.userUID === desa.userUID">
        <div class="menu">
        </div>
        <ion-list>
          <ion-item>
            <h6><b>Tipo Desayuno: </b>{{desa.platoDesayuno}}</h6>
          </ion-item>
          <ion-item>
            <h6><b>Detalle: </b>{{desa.detalleDesayuno}}</h6>
          </ion-item>
          <ion-item>
            <h6><b>Precio: </b>{{desa.precioDesayuno}}</h6>
          </ion-item>
          <ion-item>
            <h6><b>Ingredientes</b></h6>
          </ion-item>
          <div style="text-align: center;" *ngFor="let i of desa.ingredientes">
            <ion-item>
              <ion-icon name="play" slot="start"></ion-icon>
              {{i['ingrediente']}} <br>
            </ion-item>
          </div>
        </ion-list>
      </div>
    </div>
  </div>
  
  <button class="accordion">Almuerzos</button>
  <div class="panel">
    <div *ngFor="let almu of almuerzos">
      <div *ngIf="res.userUID === almu.userUID">
        <div class="menu">
        </div>
        <ion-list>
          <ion-item>
            <h6><b>Entrada: </b>{{almu.entradaAlmuerzo}}</h6>
          </ion-item>
          <ion-item>
            <h6><b>Segundo: </b>{{almu.segundoAlmuerzo}}</h6>
          </ion-item>
          <ion-item>
            <h6><b>Jugo: </b>{{almu.jugoAlmuerzo}}</h6>
          </ion-item>
          <ion-item>
            <h6><b>Precio: </b>{{almu.precioAlmuerzo}}</h6>
          </ion-item>
        </ion-list>
      </div>
    </div>
  </div> 

  <button class="accordion">Platos Especiales</button>
  <div class="panel">
    <div *ngFor="let espe of especial">
      <div *ngIf="res.userUID === espe.userUID">
        <div class="menu">
        </div>
        <ion-list>
          <ion-item>
            <h6><b>Plato: </b>{{espe.platoEspecial}}</h6>
          </ion-item>
          <ion-item>
            <h6><b>Precio: </b>{{espe.precioEspecial}}</h6>
          </ion-item>
          <div style="text-align: center;" *ngFor="let i of espe.ingredientes">
            <ion-item>
              <ion-icon name="play" slot="start"></ion-icon>
              {{i['ingrediente']}} <br>
            </ion-item>
          </div>
        </ion-list>
      </div>
    </div>
  </div>

  <button class="accordion">Comentarios</button>
  <div class="panel">
    <div *ngFor="let comen of comentarios$ | async">
      <div *ngIf="res.userUID === comen.uidResta">
        <div class="menu">
        </div>
        <ion-list>
          <ion-item>
            <h6><b>{{comen.nombreUsu}} : </b>{{comen.comentario}}</h6>
          </ion-item>
        </ion-list>
      </div>
    </div>
  </div> 

  

  <div *ngFor="let pro of promocion">
    <div *ngIf="res.userUID === pro.userUID && pro.estado=== 'verdadero'">
      <div class="menu">
      </div>
      <ion-list>
        <ion-item>
          <img [src]="pro.fotosPromocion">
        </ion-item>
      </ion-list>
    </div>
  </div>


  <!-- <div *ngFor="let afi of afiliados$ | async">
    <div *ngIf="afi.uidUsu === usuarioLog && afi.uidResta === res.userUID">
      <ng-template [ngIf]="afi.estado === 'verdadero'">
        <ion-button (click)="presentModal()">Realizar Reserva</ion-button>
      </ng-template>
    </div>
  </div> -->

  <div class="titulo">
    <h2 style="text-align: center;">Ubicación</h2>
  </div>

  <div class="mapa" id="Mapa" style="width: 95%; height: 80%;"></div>
  
  
  <br>

  <div *ngFor ="let coor of coordenadas$ | async">
    <div *ngIf = "coor.userUID === res.userUID" >
      <ion-button (click)="mostrar(res.id, coor.lat, coor.lng )">¿Cómo Llegar?</ion-button>
    </div>
  </div>

  

  <div *ngFor="let afi of afiliados$ | async">
    
    <div *ngIf="afi.uidUsu === usuarioLog && afi.idRes === res.id" >

      <p>existe </p>
    </div>
  </div>

   <!--

  <ng-template #v>
    <p>no existe</p>
    <div *ngFor="let afi of afiliados">
      <ng-template [ngIf]="afi.uidUsu === usuarioLog && afi.idres === res.id && afi.estado === 'verdadero'" >
        <p>boto reserva</p>
      </ng-template>
  
      <ng-template [ngIf]="afi.uidUsu === usuarioLog && afi.idres === res.id && afi.estado === 'falso'" >
        <p>afiliacion pendiente</p>
      </ng-template>
             <div *ngIf="afi.uidUsu === usuarioLog && afi.idres === res.id && afi.estado === 'verdadero'; else afiliar">
          <ion-button (click)="afiliarse()">Afiliarse</ion-button>
      </div> 

    </div>

  </ng-template>

  -->

  <!--

  <div *ngIf="existeAfiliacion(validacion) === false">
    <p>Afiliar</p>
  </div>

  
  <ng-template #afiliar>
    <div  *ngFor="let afi of afiliados">
      <div  *ngIf="afi.uidUsu === usuarioLog && afi.idres === res.id && afi.estado === 'falso'">
        <p>ssss</p>
      </div>
    </div>  
  </ng-template>

  -->

  <!-- <ion-button (click)="afiliarse()">Afiliarse</ion-button> -->

  <!--

  <div *ngFor="let afi of afiliados">
    <div *ngIf="afi.uidUsu != usuarioLog  ">
     
    </div>
  </div>

  -->

  


<!--

  <div *ngFor="let afi of afiliados">
    <div *ngIf="afi.uidUsu === usuarioLog && afi.uidResta === res.userUID">
      <ng-template [ngIf]="afi.estado === 'verdadero'">
        <p style="text-align: center;">Estas Afiliado a este Restaurante</p>
      </ng-template>
      <ng-template [ngIf]="afi.estado === 'falso'">
        <p style="text-align: center;">Tu Afiliacion ha sido rechazada</p>
      </ng-template>
    </div>
  </div>

-->


  <div style="text-align: center;">
  <ion-button style="text-align: center;" (click)="presentarMensaje()"  color="danger" >Afiliarse</ion-button>
  </div>

  <ng-template #foto>
    <img src="../../../assets/foto.png" width="100%" height="17%" margin-top="5px">
  </ng-template>

</ion-content>