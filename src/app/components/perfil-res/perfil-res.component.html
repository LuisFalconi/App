<ion-header>
  <ion-toolbar>
    <ion-button slot="start" fill="none" (click)="goRegreso()">
      <ion-icon name="arrow-back"></ion-icon>
    </ion-button>
    <ion-button slot="end" fill="none" (click)="getMenu()">
      <ion-icon name="menu"></ion-icon>
    </ion-button>
    <ion-title style="text-align: center;">{{res.nombreRestaurante}}</ion-title>
  </ion-toolbar>
</ion-header>
<ion-card class="fotoResta">

  <ion-header>
    <img *ngIf="res.imagenRes ; else foto" src="{{res.imagenRes}}" width="100%" height="17%" margin-top="5px">
  </ion-header>
</ion-card>

<ion-content class="ion-padding">

  <button class="accordion">
    <ion-icon src="../../../assets/information-circle-outline.svg"></ion-icon>
    &nbsp;&nbsp;&nbsp;&nbsp;
    Información
    &nbsp;&nbsp;&nbsp;&nbsp;
    <ion-icon src="../../../assets/information-circle-outline.svg"></ion-icon>

  </button>
  <div class="panel">
    <ion-card class="infomacionCard">
      <ion-card-header>
        <ion-card-subtitle>{{res.tipoRestaurante}}</ion-card-subtitle>
      </ion-card-header>
      <ion-item>
        <ion-icon name="restaurant" slot="start"></ion-icon>
        <ion-label>{{res.nombreRestaurante}}</ion-label>
        <ion-button fill="outline" slot="end"><ion-icon name="star" slot="start"></ion-icon>{{res.promedio}}
        </ion-button>
      </ion-item>

      <ion-card-content>
        Este restaurante tiene una capacidad para {{res.capacidadRestaurante}} personas, 
        se encuentra ubicado en: {{res.direccionRestaurante}}, ven a visitarlo!
        El restaurante abre sus puertas a las {{res.horaApertura}} a.m y cierra a las {{res.horaCierre}} p.m.

      </ion-card-content>
    </ion-card>
  
  <form [formGroup] ="afiliacion" (ngSubmit)="presentarMensaje(afiliacion.value)">
        <input type="file" formControlName="inputFile" (change)="elegirImagen($event)" accept="image/x-png,image/jpeg" required>

      <div style="text-align: center;">
        <ion-button [disabled] ="afiliacion.invalid"  type="submit" color="danger" expand="block">Afiliarse
          <ion-icon name="save" slot="start"></ion-icon>
        </ion-button>
        </div>
    </form>
    
 </div>
  
  <button class="accordion">
    <ion-icon src="../../../assets/fast-food.svg"></ion-icon>&nbsp;&nbsp;&nbsp;&nbsp; Desayunos &nbsp;&nbsp;&nbsp;&nbsp;
    <ion-icon src="../../../assets/fast-food.svg"></ion-icon>
  </button>

  <div class="panel">

      <ion-slides  options={{slideOpts}} pager ="true" class="slides">
        <ion-slide *ngFor="let desa of desayunosRespectivos">   
          <ion-card class="infomacionCard">
            <ion-card-header>
              <img src="../../../assets/desayuno.jpg" alt="des" width="100px" height="200px">
              <!-- <ion-card-subtitle>{{desa.platoDesayuno}}</ion-card-subtitle> -->
            </ion-card-header>
            <ion-item>
              <ion-icon name="restaurant" slot="start"></ion-icon>
              <ion-label>{{desa.platoDesayuno}}</ion-label>
              <ion-button fill="outline" slot="end"><ion-icon name="pricetag" slot="start"></ion-icon>{{desa.precioDesayuno}}&nbsp;$
              </ion-button>
            </ion-item>
      
            <ion-card-content>
              El desayuno del día es {{desa.detalleDesayuno}} <br>
              Ingredientes:
              <div style="text-align: center;" *ngFor="let i of desa.ingredientes">
                
                  <ion-icon name="remove" slot="start"></ion-icon>
                  {{i['ingrediente']}} <br>
                
              </div>
              
            </ion-card-content>
          </ion-card>
        </ion-slide>
      </ion-slides>
  </div>

 
  
  <button class="accordion">
    <ion-icon name="pizza"></ion-icon>&nbsp;&nbsp;&nbsp;&nbsp;
    Almuerzos&nbsp;&nbsp;&nbsp;&nbsp;

    <ion-icon name="pizza"></ion-icon>

  </button>
  <div class="panel">
    <ion-slides  options={{slideOpts}} pager ="true" class="slides">
      <ion-slide *ngFor="let almu of almuerzosRespectivos">  
        <ion-card class="infomacionCard">
          <img src="../../../assets/almuerz.png" alt="des" width="100px" height="200px">
          <ion-item>
            <ion-icon name="restaurant" slot="start"></ion-icon>
            <ion-label>Tipo: {{almu.entradaAlmuerzo}}</ion-label>
            <ion-button fill="outline" slot="end"><ion-icon name="pricetag" slot="start"></ion-icon>{{almu.precioAlmuerzo}} &nbsp;$
            </ion-button>
          </ion-item>
    
          <ion-card-content>
            Entrada: {{almu.entradaAlmuerzo}} <br>
            Segundo: {{almu.segundoAlmuerzo}} <br>
            Bebida: {{almu.jugoAlmuerzo}} <br>
          </ion-card-content>
        </ion-card>
      </ion-slide>
    </ion-slides>
    </div>


  <button class="accordion">
    <ion-icon name="cafe" slot="end" fill="none"></ion-icon>
    &nbsp;&nbsp;&nbsp;&nbsp;
    Platos Especiales
    &nbsp;&nbsp;&nbsp;&nbsp;
    <ion-icon name="cafe" slot="end" fill="none"></ion-icon>
  </button>
  <div class="panel">
    <ion-slides  options={{slideOpts}} pager ="true" class="slides">
      <ion-slide *ngFor="let espe of especialesRespectivos">  
        <ion-card class="infomacionCard">
          <ion-card-header>
            <img src="../../../assets/menu.png" alt="des" width="100px" height="200px">
            <!-- <ion-card-subtitle>{{desa.platoDesayuno}}</ion-card-subtitle> -->
          </ion-card-header>
          <ion-item>
            <ion-icon name="restaurant" slot="start"></ion-icon>
            <ion-label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </ion-label>
            <ion-button fill="outline" slot="end"><ion-icon name="pricetag" slot="start"></ion-icon>{{espe.precioEspecial}}&nbsp;$
            </ion-button>
          </ion-item>
    
          <ion-card-content>
            El Especial del dia:  {{espe.platoEspecial}} <br>
            Ingredientes:
            <div style="text-align: center;" *ngFor="let i of espe.ingredientes">
              
                <ion-icon name="remove" slot="start"></ion-icon>
                {{i['ingrediente']}} <br>
              
            </div>
            
          </ion-card-content>
        </ion-card>

      </ion-slide>
    </ion-slides>
    
  </div>

  <button class="accordion">
    <ion-icon name="megaphone" slot="end" fill="none"></ion-icon>  
    &nbsp;&nbsp;&nbsp;&nbsp;  
    Comentarios
    &nbsp;&nbsp;&nbsp;&nbsp;
    <ion-icon name="megaphone" slot="end" fill="none"></ion-icon>
 
  </button>

      <div class="panel" >
        <div *ngFor="let comen of comentarios$ | async">
          <div *ngIf="res.userUID === comen.uidResta">
            <ion-item>
              <h6>Usuario: {{comen.nombreUsu}}</h6>
              <h6>Comentario: {{comen.comentario}}</h6>
            </ion-item>
             
          </div>
        </div>
        <ion-infinite-scroll threshold="100px">
          <ion-infinite-scroll-content
            loadingSpinner="bubbles"
            loadingText="Loading more data...">
          </ion-infinite-scroll-content>
        </ion-infinite-scroll>
      </div> 

      

  <!-- 
    <div *ngFor="let comen of comentarios$ | async">
      <div *ngIf="res.userUID === comen.uidResta">


          <ion-item href="#" class="ion-activated">
            <ion-icon src="../../../assets/chatbubble-ellipses-outline.svg" slot="start">
              <h1>{{comen.nombreUsu}}</h1>
            </ion-icon>
            <ion-label>{{comen.comentario}}</ion-label>
          </ion-item>
        

      </div>
    </div> -->

  <button class="accordion">
    <ion-icon name="megaphone" slot="end" fill="none"></ion-icon>  
    &nbsp;&nbsp;&nbsp;&nbsp;  
    Promociones
    &nbsp;&nbsp;&nbsp;&nbsp;
    <ion-icon name="megaphone" slot="end" fill="none"></ion-icon>
  </button>
  <div class="panel">
    <ion-slides  options={{slideOpts}} pager ="true" class="slides">
      <ion-slide *ngFor="let pro of promosUsuario">   
        <div>
          <img [src] ="pro.fotosPromocion">
        </div>
      </ion-slide>
    </ion-slides>
  </div>

  <!-- <div *ngFor="let afi of afiliados$ | async">
    <div *ngIf="afi.uidUsu === usuarioLog && afi.uidResta === res.userUID">
      <ng-template [ngIf]="afi.estado === 'verdadero'">
        <ion-button (click)="presentModal()">Realizar Reserva</ion-button>
      </ng-template>
    </div>
  </div> -->

  <button class="accordion">
    <ion-icon name="compass" slot="end" fill="none"></ion-icon>
    &nbsp;&nbsp;&nbsp;&nbsp;
    Ubicación
    &nbsp;&nbsp;&nbsp;&nbsp;
    <ion-icon name="compass" slot="end" fill="none"></ion-icon>
  </button>

  <div  class="mapa" id="Mapa" style="width: 95%; height: 80%;"></div>
  
  
  <br>

  <div *ngFor ="let coor of coordenadas$ | async">
    <div *ngIf = "coor.userUID === res.userUID" >
      <ion-button (click)="mostrar(res.id, coor.lat, coor.lng )">¿Cómo Llegar?</ion-button>
    </div>
  </div>

  

  <div *ngFor="let afi of afiliados$ | async">
    
    <div *ngIf="afi.uidUsu === usuarioLog && afi.idRes === res.id" >

      <p>existe </p>
    </div>
  </div>

   <!--

  <ng-template #v>
    <p>no existe</p>
    <div *ngFor="let afi of afiliados">
      <ng-template [ngIf]="afi.uidUsu === usuarioLog && afi.idres === res.id && afi.estado === 'verdadero'" >
        <p>boto reserva</p>
      </ng-template>
  
      <ng-template [ngIf]="afi.uidUsu === usuarioLog && afi.idres === res.id && afi.estado === 'falso'" >
        <p>afiliacion pendiente</p>
      </ng-template>
             <div *ngIf="afi.uidUsu === usuarioLog && afi.idres === res.id && afi.estado === 'verdadero'; else afiliar">
          <ion-button (click)="afiliarse()">Afiliarse</ion-button>
      </div> 

    </div>

  </ng-template>

  -->

  <!--

  <div *ngIf="existeAfiliacion(validacion) === false">
    <p>Afiliar</p>
  </div>

  
  <ng-template #afiliar>
    <div  *ngFor="let afi of afiliados">
      <div  *ngIf="afi.uidUsu === usuarioLog && afi.idres === res.id && afi.estado === 'falso'">
        <p>ssss</p>
      </div>
    </div>  
  </ng-template>

  -->

  <!-- <ion-button (click)="afiliarse()">Afiliarse</ion-button> -->

  <!--

  <div *ngFor="let afi of afiliados">
    <div *ngIf="afi.uidUsu != usuarioLog  ">
     
    </div>
  </div>

  -->

  


<!--

  <div *ngFor="let afi of afiliados">
    <div *ngIf="afi.uidUsu === usuarioLog && afi.uidResta === res.userUID">
      <ng-template [ngIf]="afi.estado === 'verdadero'">
        <p style="text-align: center;">Estas Afiliado a este Restaurante</p>
      </ng-template>
      <ng-template [ngIf]="afi.estado === 'falso'">
        <p style="text-align: center;">Tu Afiliacion ha sido rechazada</p>
      </ng-template>
    </div>
  </div>

-->

  <ng-template #foto>
    <img src="../../../assets/foto.png" width="100%" height="17%" margin-top="5px">
  </ng-template>

</ion-content>